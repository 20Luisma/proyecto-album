{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "ğŸš€ Iniciar servidor PHP",
      "type": "shell",
      "command": "php",
      "args": [
        "-S",
        "localhost:8080",
        "-t",
        "public"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§ª Ejecutar Tests PHPUnit",
      "type": "shell",
      "command": "vendor/bin/phpunit",
      "args": [
        "--colors=always",
        "--testdox"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ” Analizar cÃ³digo (PHPStan)",
      "type": "shell",
      "command": "vendor/bin/phpstan",
      "args": [
        "analyse",
        "--memory-limit=512M"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "âš™ï¸ Validar composer",
      "type": "shell",
      "command": "composer",
      "args": [
        "validate"
      ],
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "ğŸ§± Build completo (Tests + PHPStan + Composer)",
      "dependsOn": [
        "ğŸ§ª Ejecutar Tests PHPUnit",
        "ğŸ” Analizar cÃ³digo (PHPStan)",
        "âš™ï¸ Validar composer"
      ],
      "dependsOrder": "sequence",
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    },
    {
      "label": "â¬†ï¸ Git: add + commit + push (seguro)",
      "type": "shell",
      "command": "bash",
      "args": [
        "-c",
        "[ -f clean-marvel/.env ] && { echo \"ERROR: existe clean-marvel/.env. MuÃ©velo o bÃ³rralo antes de subir.\"; exit 1; }; git add . && (git commit -m \"update clean-marvel\" || true) && git push"
      ],
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      },
      "problemMatcher": []
    },
    {
      "label": "â–¶ï¸ Servidor (por defecto)",
      "dependsOn": [
        "ğŸš€ Iniciar servidor PHP"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "shared"
      }
    }
  ]
}
